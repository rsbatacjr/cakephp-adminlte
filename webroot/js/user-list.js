var userListPage=function(t,e,a){var s=notificationHelper,r=dialogHelper,l={initialize:function(){t("#hdn-id").attr("value",0),t("#txt-first_name").prop("value",""),t("#txt-last_name").prop("value",""),t("#txt-email").prop("value",""),t("#sel-role").val(0),t("#chk-active").attr("checked",!1)},setDefaults:function(){t.ajax({url:"/UserRoles/GetUserRoleOptions/",success:function(e){t.each(e,function(){t("#sel-role").append("<option value='"+t(this)[0].id+"'>"+t(this)[0].role+"</option>")})}})},setEvents:function(){t("#add_user").on("click",function(e){t("#userEditor").attr("data-mode","new"),t("#userEditor").find("#title").text("New User"),t("#userEditor").modal("show"),l.initialize()}),t("#example2 tbody tr td:last-child").find(".delete-btn").on("click",function(e){l.delete(t(this).data("id"))})},validateEntries:function(){return!0},save:function(){var e=l.validateEntries();e&&t.ajax({url:"/users/add/",type:"post",data:{first_name:t("#txt-first_name").val(),last_name:t("#txt-last_name").val(),email:t("#txt-email").val(),role_id:t("#sel-role").val(),active:t("#chk-active").is(":checked")?1:0},success:function(t){"success"==t.status?(s.showInformation({msg:t.message,title:"Success"}),window.location.reload()):s.showError({msg:t.message,title:"Error"})},error:function(t){s.showError({msg:"There was an error trying to contact the server, please try again later",title:"Error"})}})},update:function(){t.ajax({url:"/users/edit/",type:"post",data:{id:t("#hdn-id").val(),first_name:t("#txt-first_name").val(),last_name:t("#txt-last_name").val(),email:t("#txt-email").val(),role_id:t("#sel-role").val(),active:t("#chk-active").is(":checked")?1:0},success:function(t){"success"==t.status?(s.showInformation({msg:t.message,title:"Success"}),window.location.reload()):s.showError({msg:t.message,title:"Error"})},error:function(t){s.showError({msg:"There was an error trying to contact the server, please try again later",title:"Error"})}})},delete:function(e){t.ajax({url:"/users/delete/",type:"post",data:{id:e},success:function(t){"success"==t.status?(s.showInformation({msg:t.message,title:"Success"}),window.location.reload()):s.showError({msg:t.message,title:"Error"})},error:function(t){s.showError({msg:"There was an error trying to contact the server, please try again later",title:"Error"})}})}};return{onLoad:function(e){e.saveMethod=function(){"new"==t("#userEditor").data("mode")?l.save():l.update()},r.AddDialog(e),l.setEvents(),l.setDefaults()}}}(jQuery,toastr);$(document).ready(function(){var t="",e={},a=userListPage;e.id="userEditor",e.height=380,e.content="<div class='row'><div class='form-horizontal'><input type='hidden' id='hdn-id'><div class='form-group'><label for='txt-first_name' class='control-label col-xs-3'>First Name</label><div class='col-xs-9'><input type='text' id='txt-first_name' class='form-control' /></div></div><div class='form-group'><label for='txt-last_name' class='control-label col-xs-3'>Last Name</label><div class='col-xs-9'><input type='text' id='txt-last_name' class='form-control' /></div></div><div class='form-group'><label for='txt-email' class='control-label col-xs-3'>Email</label><div class='col-xs-9'><input type='text' id='txt-email' class='form-control' /></div></div><div class='form-group'><label for='sel-role' class='control-label col-xs-3'>Role</label><div class='col-xs-9'><select id='sel-role' class='form-control'><option value=''>-- Select Role --</option></select></div></div><div class='form-group'><label for='chk-active' class='control-label col-xs-3'>Active</label><div class='col-xs-9'><input type='checkbox' id='chk-active' /></div></div></div></div>",$("#example2").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!1}),$(".dataTables_wrapper > .row > .col-sm-6:first-child").html("<button id='add_user' class='btn btn-primary'>New</button>"),$("input[type=search]").css({width:"400px"}),$("#example2 tbody tr").find("td:first-child").on("click",function(){t=$(this).find("a").data("id"),$.ajax({url:"/Users/GetUserById/"+t,success:function(t){u=t[0],$("#userEditor").attr("data-mode","edit"),$("#"+e.id).find("#title").text("Edit User"),$("#"+e.id).modal("show"),$("#hdn-id").attr("value",u.id),$("#txt-first_name").attr("value",u.person.first_name),$("#txt-last_name").attr("value",u.person.last_name),$("#txt-email").attr("value",u.email),$("#sel-role").val(u.role_id),$("#chk-active").attr("checked",u.active)}})}),a.onLoad(e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItbGlzdC5qcyJdLCJuYW1lcyI6WyJ1c2VyTGlzdFBhZ2UiLCIkIiwidG9hc3RyIiwidW5kZWZpbmVkIiwibm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uSGVscGVyIiwiZGlhbG9nIiwiZGlhbG9nSGVscGVyIiwicHJpdmF0ZSIsImluaXRpYWxpemUiLCJhdHRyIiwicHJvcCIsInZhbCIsInNldERlZmF1bHRzIiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJzIiwiZWFjaCIsImFwcGVuZCIsInRoaXMiLCJpZCIsInJvbGUiLCJzZXRFdmVudHMiLCJvbiIsImUiLCJmaW5kIiwidGV4dCIsIm1vZGFsIiwiZGVsZXRlIiwiZGF0YSIsInZhbGlkYXRlRW50cmllcyIsInNhdmUiLCJ2YWxpZCIsInR5cGUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJyb2xlX2lkIiwiYWN0aXZlIiwiaXMiLCJzdGF0dXMiLCJzaG93SW5mb3JtYXRpb24iLCJtc2ciLCJtZXNzYWdlIiwidGl0bGUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInNob3dFcnJvciIsImVycm9yIiwidXBkYXRlIiwib25Mb2FkIiwib3B0aW9ucyIsInNhdmVNZXRob2QiLCJBZGREaWFsb2ciLCJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwicHJpbWFyeV9rZXkiLCJ1c2VyTGlzdCIsImhlaWdodCIsImNvbnRlbnQiLCJEYXRhVGFibGUiLCJwYWdpbmciLCJsZW5ndGhDaGFuZ2UiLCJzZWFyY2hpbmciLCJvcmRlcmluZyIsImluZm8iLCJhdXRvV2lkdGgiLCJodG1sIiwiY3NzIiwid2lkdGgiLCJyIiwidSIsInBlcnNvbiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsY0FBZSxTQUFVQyxFQUFHQyxFQUFRQyxHQUNwQyxHQUFJQyxHQUFlQyxtQkFDZkMsRUFBU0MsYUFDVEMsR0FDSUMsV0FBWSxXQUNSUixFQUFFLFdBQVdTLEtBQUssUUFBUyxHQUMzQlQsRUFBRSxt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ZW50IjpbInZhciB1c2VyTGlzdFBhZ2UgPSAoZnVuY3Rpb24oJCwgdG9hc3RyLCB1bmRlZmluZWQpIHtcbiAgICB2YXIgbm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uSGVscGVyLFxuICAgICAgICBkaWFsb2cgPSBkaWFsb2dIZWxwZXIsXG4gICAgICAgIHByaXZhdGUgPSB7XG4gICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcjaGRuLWlkJykuYXR0cihcInZhbHVlXCIsIDApO1xuICAgICAgICAgICAgICAgICQoJyN0eHQtZmlyc3RfbmFtZScpLnByb3AoXCJ2YWx1ZVwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAkKCcjdHh0LWxhc3RfbmFtZScpLnByb3AoXCJ2YWx1ZVwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAkKCcjdHh0LWVtYWlsJykucHJvcChcInZhbHVlXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICQoJyNzZWwtcm9sZScpLnZhbCgwKTtcbiAgICAgICAgICAgICAgICAkKCcjY2hrLWFjdGl2ZScpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0RGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9Vc2VyUm9sZXMvR2V0VXNlclJvbGVPcHRpb25zLycsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHMsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbC1yb2xlJykuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyAkKHRoaXMpWzBdLmlkICsgXCInPlwiICsgJCh0aGlzKVswXS5yb2xlICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyNhZGRfdXNlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3VzZXJFZGl0b3InKS5hdHRyKFwiZGF0YS1tb2RlXCIsIFwibmV3XCIpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdXNlckVkaXRvcicpLmZpbmQoJyN0aXRsZScpLnRleHQoXCJOZXcgVXNlclwiKVxuICAgICAgICAgICAgICAgICAgICAkKCcjdXNlckVkaXRvcicpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByaXZhdGUuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJCgnI2V4YW1wbGUyIHRib2R5IHRyIHRkOmxhc3QtY2hpbGQnKS5maW5kKCcuZGVsZXRlLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZS5kZWxldGUoJCh0aGlzKS5kYXRhKCdpZCcpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWxpZGF0ZUVudHJpZXM6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gcHJpdmF0ZS52YWxpZGF0ZUVudHJpZXMoKSwgZGF0YT1bXTtcblxuICAgICAgICAgICAgICAgIGlmKHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3VzZXJzL2FkZC9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAkKCcjdHh0LWZpcnN0X25hbWUnKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X25hbWU6ICQoJyN0eHQtbGFzdF9uYW1lJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICQoJyN0eHQtZW1haWwnKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlX2lkOiAkKCcjc2VsLXJvbGUnKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCcjY2hrLWFjdGl2ZScpLmlzKCc6Y2hlY2tlZCcpID8gMTogMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocy5zdGF0dXMgPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zaG93SW5mb3JtYXRpb24oe21zZzogcy5tZXNzYWdlLCB0aXRsZTogXCJTdWNjZXNzXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhID0gcy5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2hvd0Vycm9yKHttc2c6IHMubWVzc2FnZSwgdGl0bGU6IFwiRXJyb3JcIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zaG93RXJyb3Ioe21zZzogXCJUaGVyZSB3YXMgYW4gZXJyb3IgdHJ5aW5nIHRvIGNvbnRhY3QgdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwiLCB0aXRsZTogXCJFcnJvclwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvdXNlcnMvZWRpdC9cIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsIFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJCgnI2hkbi1pZCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJCgnI3R4dC1maXJzdF9uYW1lJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0X25hbWU6ICQoJyN0eHQtbGFzdF9uYW1lJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogJCgnI3R4dC1lbWFpbCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZV9pZDogJCgnI3NlbC1yb2xlJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCcjY2hrLWFjdGl2ZScpLmlzKCc6Y2hlY2tlZCcpID8gMTogMClcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYocy5zdGF0dXMgPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNob3dJbmZvcm1hdGlvbih7bXNnOiBzLm1lc3NhZ2UsIHRpdGxlOiBcIlN1Y2Nlc3NcIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNob3dFcnJvcih7bXNnOiBzLm1lc3NhZ2UsIHRpdGxlOiBcIkVycm9yXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zaG93RXJyb3Ioe21zZzogXCJUaGVyZSB3YXMgYW4gZXJyb3IgdHJ5aW5nIHRvIGNvbnRhY3QgdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlclwiLCB0aXRsZTogXCJFcnJvclwifSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL3VzZXJzL2RlbGV0ZS9cIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzLnN0YXR1cyA9PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2hvd0luZm9ybWF0aW9uKHttc2c6IHMubWVzc2FnZSwgdGl0bGU6IFwiU3VjY2Vzc1wifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2hvd0Vycm9yKHttc2c6IHMubWVzc2FnZSwgdGl0bGU6IFwiRXJyb3JcIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNob3dFcnJvcih7bXNnOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB0cnlpbmcgdG8gY29udGFjdCB0aGUgc2VydmVyLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyXCIsIHRpdGxlOiBcIkVycm9yXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHB1YmxpYyA9IHtcbiAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2F2ZU1ldGhvZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZSA9ICQoJyN1c2VyRWRpdG9yJykuZGF0YSgnbW9kZScpO1xuICAgICAgICAgICAgICAgICAgICBpZihtb2RlID09ICduZXcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcml2YXRlLnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGUudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkaWFsb2cuQWRkRGlhbG9nKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHByaXZhdGUuc2V0RXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgcHJpdmF0ZS5zZXREZWZhdWx0cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICByZXR1cm4gcHVibGljO1xufSkoalF1ZXJ5LCB0b2FzdHIpO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJpbWFyeV9rZXkgPSBcIlwiLFxuICAgICAgICBvcHRpb25zID0ge30sXG4gICAgICAgIHVzZXJMaXN0ID0gdXNlckxpc3RQYWdlO1xuXG5cbiAgICBvcHRpb25zLmlkID0gXCJ1c2VyRWRpdG9yXCI7XG4gICAgb3B0aW9ucy5oZWlnaHQgPSAzODA7XG4gICAgb3B0aW9ucy5jb250ZW50ID1cbiAgICBcIjxkaXYgY2xhc3M9J3Jvdyc+XCIgK1xuICAgICAgICBcIjxkaXYgY2xhc3M9J2Zvcm0taG9yaXpvbnRhbCc+XCIgK1xuICAgICAgICAgICAgXCI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0naGRuLWlkJz5cIiArXG4gICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPlwiICtcbiAgICAgICAgICAgICAgICBcIjxsYWJlbCBmb3I9J3R4dC1maXJzdF9uYW1lJyBjbGFzcz0nY29udHJvbC1sYWJlbCBjb2wteHMtMyc+Rmlyc3QgTmFtZTwvbGFiZWw+XCIgK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nY29sLXhzLTknPlwiICtcbiAgICAgICAgICAgICAgICAgICAgXCI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J3R4dC1maXJzdF9uYW1lJyBjbGFzcz0nZm9ybS1jb250cm9sJyAvPlwiICtcbiAgICAgICAgICAgICAgICBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdmb3JtLWdyb3VwJz5cIiArXG4gICAgICAgICAgICAgICAgXCI8bGFiZWwgZm9yPSd0eHQtbGFzdF9uYW1lJyBjbGFzcz0nY29udHJvbC1sYWJlbCBjb2wteHMtMyc+TGFzdCBOYW1lPC9sYWJlbD5cIiArXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdjb2wteHMtOSc+XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0ndHh0LWxhc3RfbmFtZScgY2xhc3M9J2Zvcm0tY29udHJvbCcgLz5cIiArXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgICAgICBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+XCIgK1xuICAgICAgICAgICAgICAgIFwiPGxhYmVsIGZvcj0ndHh0LWVtYWlsJyBjbGFzcz0nY29udHJvbC1sYWJlbCBjb2wteHMtMyc+RW1haWw8L2xhYmVsPlwiICtcbiAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2NvbC14cy05Jz5cIiArXG4gICAgICAgICAgICAgICAgICAgIFwiPGlucHV0IHR5cGU9J3RleHQnIGlkPSd0eHQtZW1haWwnIGNsYXNzPSdmb3JtLWNvbnRyb2wnIC8+XCIgK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPlwiICtcbiAgICAgICAgICAgICAgICBcIjxsYWJlbCBmb3I9J3NlbC1yb2xlJyBjbGFzcz0nY29udHJvbC1sYWJlbCBjb2wteHMtMyc+Um9sZTwvbGFiZWw+XCIgK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nY29sLXhzLTknPlwiICtcbiAgICAgICAgICAgICAgICAgICAgXCI8c2VsZWN0IGlkPSdzZWwtcm9sZScgY2xhc3M9J2Zvcm0tY29udHJvbCc+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCI8b3B0aW9uIHZhbHVlPScnPi0tIFNlbGVjdCBSb2xlIC0tPC9vcHRpb24+XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIjwvc2VsZWN0PlwiICtcbiAgICAgICAgICAgICAgICBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdmb3JtLWdyb3VwJz5cIiArXG4gICAgICAgICAgICAgICAgXCI8bGFiZWwgZm9yPSdjaGstYWN0aXZlJyBjbGFzcz0nY29udHJvbC1sYWJlbCBjb2wteHMtMyc+QWN0aXZlPC9sYWJlbD5cIiArXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdjb2wteHMtOSc+XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J2Noay1hY3RpdmUnIC8+XCIgK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgIFwiPC9kaXY+XCIgK1xuICAgIFwiPC9kaXY+XCI7XG5cbiAgICAkKFwiI2V4YW1wbGUyXCIpLkRhdGFUYWJsZSh7XG4gICAgICAgIFwicGFnaW5nXCI6IHRydWUsXG4gICAgICAgIFwibGVuZ3RoQ2hhbmdlXCI6IHRydWUsXG4gICAgICAgIFwic2VhcmNoaW5nXCI6IHRydWUsXG4gICAgICAgIFwib3JkZXJpbmdcIjogdHJ1ZSxcbiAgICAgICAgXCJpbmZvXCI6IHRydWUsXG4gICAgICAgIFwiYXV0b1dpZHRoXCI6IGZhbHNlXG4gICAgfSk7XG5cbiAgICAkKFwiLmRhdGFUYWJsZXNfd3JhcHBlciA+IC5yb3cgPiAuY29sLXNtLTY6Zmlyc3QtY2hpbGRcIikuaHRtbChcIjxidXR0b24gaWQ9XFwnYWRkX3VzZXJcXCcgY2xhc3M9XFwnYnRuIGJ0bi1wcmltYXJ5XFwnPk5ldzwvYnV0dG9uPlwiKTtcblxuICAgICQoXCJpbnB1dFt0eXBlPXNlYXJjaF1cIikuY3NzKHtcIndpZHRoXCI6IFwiNDAwcHhcIn0pO1xuXG4gICAgJChcIiNleGFtcGxlMiB0Ym9keSB0clwiKS5maW5kKFwidGQ6Zmlyc3QtY2hpbGRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgICBwcmltYXJ5X2tleSA9ICQodGhpcykuZmluZChcImFcIikuZGF0YShcImlkXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvVXNlcnMvR2V0VXNlckJ5SWQvJyArIHByaW1hcnlfa2V5LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocil7XG4gICAgICAgICAgICAgICAgdSA9IHJbMF07XG4gICAgICAgICAgICAgICAgJCgnI3VzZXJFZGl0b3InKS5hdHRyKFwiZGF0YS1tb2RlXCIsIFwiZWRpdFwiKTtcbiAgICAgICAgICAgICAgICAkKCcjJyArIG9wdGlvbnMuaWQpLmZpbmQoJyN0aXRsZScpLnRleHQoXCJFZGl0IFVzZXJcIik7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBvcHRpb25zLmlkKS5tb2RhbCgnc2hvdycpO1xuXG4gICAgICAgICAgICAgICAgJCgnI2hkbi1pZCcpLmF0dHIoXCJ2YWx1ZVwiLCB1LmlkKTtcbiAgICAgICAgICAgICAgICAkKCcjdHh0LWZpcnN0X25hbWUnKS5hdHRyKFwidmFsdWVcIiwgdS5wZXJzb24uZmlyc3RfbmFtZSk7XG4gICAgICAgICAgICAgICAgJCgnI3R4dC1sYXN0X25hbWUnKS5hdHRyKFwidmFsdWVcIiwgdS5wZXJzb24ubGFzdF9uYW1lKTtcbiAgICAgICAgICAgICAgICAkKCcjdHh0LWVtYWlsJykuYXR0cihcInZhbHVlXCIsIHUuZW1haWwpO1xuICAgICAgICAgICAgICAgICQoJyNzZWwtcm9sZScpLnZhbCh1LnJvbGVfaWQpO1xuICAgICAgICAgICAgICAgICQoJyNjaGstYWN0aXZlJykuYXR0cignY2hlY2tlZCcsIHUuYWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgIHVzZXJMaXN0Lm9uTG9hZChvcHRpb25zKTtcbn0pOyJdfQ==
